# =============================================================================
# Enterprise Knowledge Assistant - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# =============================================================================
# LLM Configuration (OpenAI-compatible API)
# =============================================================================
# Supported providers: openai, azure, ollama, anthropic, custom
# All providers use OpenAI-compatible API format

LLM_PROVIDER=openai
LLM_API_BASE=https://api.openai.com/v1
LLM_API_KEY=sk-your-api-key-here
LLM_MODEL=gpt-4-turbo

# Optional LLM settings
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=4096
LLM_TIMEOUT=60
LLM_MAX_RETRIES=3

# Azure-specific (only if LLM_PROVIDER=azure)
# LLM_API_VERSION=2024-02-15-preview
# LLM_AZURE_DEPLOYMENT=your-deployment-name

# =============================================================================
# Embedding Configuration
# =============================================================================
EMBEDDING_MODEL=BAAI/bge-m3
EMBEDDING_DEVICE=cuda
EMBEDDING_BATCH_SIZE=32
EMBEDDING_MAX_LENGTH=512

# SPLADE sparse embeddings
SPLADE_MODEL=naver/splade-cocondenser-ensembledistil
SPLADE_DEVICE=cuda

# =============================================================================
# Reranker Configuration
# =============================================================================
RERANKER_MODEL=colbert-ir/colbertv2.0
RERANKER_DEVICE=cuda
RERANKER_TOP_K=10

# =============================================================================
# Vector Database (Qdrant)
# =============================================================================
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=enterprise_docs
QDRANT_VECTOR_SIZE=1024
QDRANT_DISTANCE=Cosine

# =============================================================================
# Graph Database (Neo4j)
# =============================================================================
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password
NEO4J_DATABASE=neo4j

# =============================================================================
# Cache (Redis)
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_TTL_SECONDS=3600

# =============================================================================
# Message Queue (RabbitMQ)
# =============================================================================
RABBITMQ_URL=amqp://guest:guest@localhost:5672/
RABBITMQ_QUEUE_NAME=document_processing

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true
API_LOG_LEVEL=info

# CORS settings
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# Security
# =============================================================================
# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# API Keys for service accounts
API_KEY_HEADER=X-API-Key

# =============================================================================
# Document Processing
# =============================================================================
UPLOAD_DIR=./data/uploads
MAX_UPLOAD_SIZE_MB=50
ALLOWED_EXTENSIONS=["pdf","docx","doc","txt","html","md"]

# Chunking settings
CHUNK_SIZE=512
CHUNK_OVERLAP=50
CHUNK_STRATEGY=semantic

# =============================================================================
# Retrieval Settings
# =============================================================================
# Hybrid search weights (must sum to 1.0)
BM25_WEIGHT=0.3
DENSE_WEIGHT=0.4
SPARSE_WEIGHT=0.3

# RRF fusion parameter
RRF_K=60

# Search settings
DEFAULT_TOP_K=20
RERANK_TOP_K=10

# =============================================================================
# Agent Configuration
# =============================================================================
AGENT_MAX_ITERATIONS=10
AGENT_TIMEOUT_SECONDS=120
ENABLE_SELF_VALIDATION=true
ENABLE_MULTI_HOP=true

# =============================================================================
# MLOps Configuration
# =============================================================================
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=enterprise-knowledge-assistant
MLFLOW_REGISTRY_URI=http://localhost:5000

# DVC remote storage
DVC_REMOTE_URL=s3://your-bucket/dvc-storage

# =============================================================================
# Monitoring
# =============================================================================
PROMETHEUS_PORT=9090
ENABLE_METRICS=true
ENABLE_TRACING=true

# Jaeger tracing
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# =============================================================================
# Logging
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/app.log
ENABLE_PII_MASKING=true

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_KNOWLEDGE_GRAPH=true
FEATURE_MULTI_AGENT=true
FEATURE_STREAMING=true
FEATURE_CACHING=true
